package data;
import java.io.StringWriter;
import java.util.ArrayList;

import org.xmlpull.v1.XmlSerializer;

import android.graphics.Color;
import android.util.Xml;

public class ListItem 
{
	
	//Attributs & Constructor
	String listName;
	Color listColor;
	ArrayList<Item> list = new ArrayList<Item>();
	public ListItem(String listName, Color listColor) 
	{
		this.listName = listName;
		this.listColor = listColor;
		save();
	}
	public ListItem(String listName) 
	{
		load(listName);
	}
	
	
	//Core Functions
	public void addItem(String data)
	{
		this.list.add(new Item(data));
		save();
	}
	public void removeItem(String data)
	{
		this.list.remove(list.indexOf(data));
		save();
	}
	public void load(String listName)
	{
		
	}
	public void save()
	{
		 XmlSerializer serializer = Xml.newSerializer();
		 StringWriter writer = new StringWriter();
		 try {
				 serializer.setOutput(writer);
			     serializer.startDocument("UTF-8", true);
			     
				     serializer.startTag("", "NameList");
				     	serializer.text(this.getListName());
				     serializer.endTag("", "NameList");
				     serializer.startTag("", "ColorList");
				     	serializer.text(this.getListColor().toString());
				     serializer.endTag("", "ColorList");				     
				     serializer.startTag("", "ItemList");
					     for (Item item: this.getList()){
					            serializer.startTag("", "Item");
					            serializer.text(item.toString());
					            serializer.endTag("", "Item");
					     }
				     serializer.endTag("", "ItemList");
			     serializer.endDocument();
			     return writer.toString();
		    } 
		 catch (Exception e) 
		    {
		        throw new RuntimeException(e);
		    } 
	}




	// Getters&Setters
	public String getListName() 
	{
		return listName;
	}
	public void setListName(String listName) {
		this.listName = listName;
		save();
	}
	public Color getListColor() {
		return listColor;
	}
	public void setListColor(Color listColor) {
		this.listColor = listColor;
		save();
	}
	public ArrayList<Item> getList() {
		return list;
	}

}
