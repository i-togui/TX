package core;

import java.io.File;
import java.io.FileDescriptor;
import java.io.FileOutputStream;
import java.io.IOException;

import android.media.MediaRecorder;
import android.os.Environment;

public class Mp3Recorder 
{
	Mp3Recorder()
	{
		MediaRecorder recorder = new MediaRecorder();
		recorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
		recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
		File folder = new File(Environment.getExternalStorageDirectory()
		            + File.separator + "Audio recordings");
		String[] files = folder.list();
		    int number = files.length + 1;
		    String filename = "AudioSample" + number + ".mp3";
		    File output = new File(Environment.getExternalStorageDirectory()
		            + File.separator + "Audio recordings" + File.separator
		            + filename);
		    FileOutputStream writer = new FileOutputStream(output);
		    FileDescriptor fd = writer.getFD();
		    recorder.setOutputFile(fd);
		    try {
		        recorder.prepare();
		        recorder.start();
		    } catch (IllegalStateException e) {
		        e.printStackTrace();
		    } catch (IOException e) {
		        Log.e(LOG_TAG, "prepare() failed");
		        e.printStackTrace();
		    }
	}
}
